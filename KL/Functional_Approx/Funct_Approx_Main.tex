\section{Projection of Functionals}
\label{sec:funcApprox}
In  \Cref{sec:pathApprox}, we unveiled two ways to approximate exotic payoffs $\varphi = h\circ f$, namely by projecting the original path $X$ or $Y = f(X)$ directly.  If $\pi^{K,\frakF}$ denotes as before the projection map onto a Hilbert space $\calH$, we can therefore write $\varphi^{K,\frakF} := h\circ f^{K,\frakF}$, where either $f^{K,\frakF} = f \circ \pi^{K,\frakF}$ (functional of projected path)
or $f^{K,\frakF} = \pi^{K,\frakF} \circ f$ (projected functional). 
% This implies that the transformed path is projected  we can either take the image of the projected path  $(Y^{K,\frakF} = (\pi^{K,\frakF} \circ f)(X))$ or project $f(X)$ directly  $(Y^{K,\frakF} = (\pi^{K,\frakF} \circ f)(X))$. 
% This consists of taking the image of a projected path through the functional, namely $Y^{K,\frakF} =  f(X^{K,\frakF})$. 
We shall see in  \Cref{ssec: numResult} that the former is suboptimal. 
Although not so problematic for functionals capturing global features of a path, local path characteristics (e.g. running maximum) will typically be grossly estimated. Indeed, projecting a path first erases most of its microstructure. 
We thus favor the second option ($f^{K,\frakF} = \pi^{K,\frakF} \circ f$), which consists of replacing $X$ by $Y$ in $\eqref{eq:proj}$. Let us now focus on $\calH = L^2([0,T])$ and demonstrate how to compute the Karhunen-Lo√®ve basis of $Y$. 

\input{KL/Functional_Approx/Functional_Projection}
\input{KL/Functional_Approx/Numerics}
